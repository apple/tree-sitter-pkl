==========
basic/constModifier2
==========

const foo = new {
  bar = "bar"
  baz = bar
  local loc = bar
  qux = loc
  local function f() = 1
  qix = f()
}

const bar {
  qux = 1
  local function buzz() = 5
  baz {
    corge = 2
    biz {
      buz = qux
      qup = corge
      fuzz = buzz()
    }
  }
}

amend = (foo) {
  baz = "amend"
}

class Thing {
  prop1: Int = 5
  prop2: Int
  prop3: Thing2
}

class Thing2 {
  prop4: Int = 5
}

const thing = new Thing {
  // can reference properties from implicit `this` if within const scope
  prop2 = prop1
}

const thing2 = new Thing {
  // can reference properties from explicit `this` if within const scope
  prop2 = this.prop1
}

const thing3 = new Thing {
  // can reference properties with explicit `super` if within const scope
  prop2 = super.prop1
}

const thing4 = new Thing {
  prop2 = 2
  prop3 {
    prop4 = 10
  }
}

---

(module
  (classProperty
    (modifier)
    (identifier)
    (newExpr
      (objectBody
        (objectProperty
          (identifier)
          (slStringLiteral
            (slStringLiteralPart)))
        (objectProperty
          (identifier)
          (variableExpr
            (identifier)))
        (objectProperty
          (modifier)
          (identifier)
          (variableExpr
            (identifier)))
        (objectProperty
          (identifier)
          (variableExpr
            (identifier)))
        (objectMethod
          (methodHeader
            (modifier)
            (identifier)
            (parameterList))
          (intLiteral))
        (objectProperty
          (identifier)
          (methodCallExpr
            (identifier)
            (argumentList))))))
  (classProperty
    (modifier)
    (identifier)
    (objectBody
      (objectProperty
        (identifier)
        (intLiteral))
      (objectMethod
        (methodHeader
          (modifier)
          (identifier)
          (parameterList))
        (intLiteral))
      (objectProperty
        (identifier)
        (objectBody
          (objectProperty
            (identifier)
            (intLiteral))
          (objectProperty
            (identifier)
            (objectBody
              (objectProperty
                (identifier)
                (variableExpr
                  (identifier)))
              (objectProperty
                (identifier)
                (variableExpr
                  (identifier)))
              (objectProperty
                (identifier)
                (methodCallExpr
                  (identifier)
                  (argumentList)))))))))
  (classProperty
    (identifier)
    (objectLiteral
      (parenthesizedExpr
        (variableExpr
          (identifier)))
      (objectBody
        (objectProperty
          (identifier)
          (slStringLiteral
            (slStringLiteralPart))))))
  (clazz
    (identifier)
    (classBody
      (classProperty
        (identifier)
        (typeAnnotation
          (type
            (qualifiedIdentifier
              (identifier))))
        (intLiteral))
      (classProperty
        (identifier)
        (typeAnnotation
          (type
            (qualifiedIdentifier
              (identifier)))))
      (classProperty
        (identifier)
        (typeAnnotation
          (type
            (qualifiedIdentifier
              (identifier)))))))
  (clazz
    (identifier)
    (classBody
      (classProperty
        (identifier)
        (typeAnnotation
          (type
            (qualifiedIdentifier
              (identifier))))
        (intLiteral))))
  (classProperty
    (modifier)
    (identifier)
    (newExpr
      (type
        (qualifiedIdentifier
          (identifier)))
      (objectBody
        (lineComment)
        (objectProperty
          (identifier)
          (variableExpr
            (identifier))))))
  (classProperty
    (modifier)
    (identifier)
    (newExpr
      (type
        (qualifiedIdentifier
          (identifier)))
      (objectBody
        (lineComment)
        (objectProperty
          (identifier)
          (propertyCallExpr
            (thisExpr)
            (identifier))))))
  (classProperty
    (modifier)
    (identifier)
    (newExpr
      (type
        (qualifiedIdentifier
          (identifier)))
      (objectBody
        (lineComment)
        (objectProperty
          (identifier)
          (propertyCallExpr
            (identifier))))))
  (classProperty
    (modifier)
    (identifier)
    (newExpr
      (type
        (qualifiedIdentifier
          (identifier)))
      (objectBody
        (objectProperty
          (identifier)
          (intLiteral))
        (objectProperty
          (identifier)
          (objectBody
            (objectProperty
              (identifier)
              (intLiteral))))))))
