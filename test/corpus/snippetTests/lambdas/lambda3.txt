===
lambdas/lambda3.pkl
===

x = 4
function double(n) = n * 2
pigeon {
  name = "Pigeon"
  age = 30
}
class Multiplier {
  function mult4(x) = x * 4
  hidden mult = (x, y) -> x * y
}
multiplier = new Multiplier {}
l = List(1, 2, 3)

res1 = l.map((n) -> x * x)
res2 = l.map((n) -> double(n))
res3 = l.map((n) -> pigeon.age * n)
res4 = l.map((n) -> multiplier.mult4(n))
res5 = l.map((n) -> multiplier.mult.apply(n, 4))

res6 = l.fold(0, (m, n) -> m + n + x)
res7 = l.fold(0, (m, n) -> double(m) + n)
res8 = l.fold(0, (m, n) -> pigeon.age * n + m)
res9 = l.fold(0, (m, n) -> multiplier.mult4(m) + n)
res10 = l.fold(0, (m, n) -> multiplier.mult.apply(m, n))

function kick(fn) = fn.apply()
res11 = kick(() -> x)
res12 = kick(() -> double(4))
res13 = kick(() -> pigeon.age)
res14 = kick(() -> multiplier.mult4(4))
res15 = kick(() -> multiplier.mult.apply(2, 3))

---

(module
  (classProperty
    (identifier)
    (intLiteralExpr))
  (classMethod
    (methodHeader
      (identifier)
      (parameterList
        (typedIdentifier
          (identifier))))
    (multiplicativeExpr
      (unqualifiedAccessExpr
        (identifier))
      (intLiteralExpr)))
  (classProperty
    (identifier)
    (objectBody
      (objectProperty
        (identifier)
        (slStringLiteralExpr
          (slStringLiteralPart)))
      (objectProperty
        (identifier)
        (intLiteralExpr))))
  (clazz
    (identifier)
    (classBody
      (classMethod
        (methodHeader
          (identifier)
          (parameterList
            (typedIdentifier
              (identifier))))
        (multiplicativeExpr
          (unqualifiedAccessExpr
            (identifier))
          (intLiteralExpr)))
      (classProperty
        (modifier)
        (identifier)
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier))
            (typedIdentifier
              (identifier)))
          (multiplicativeExpr
            (unqualifiedAccessExpr
              (identifier))
            (unqualifiedAccessExpr
              (identifier)))))))
  (classProperty
    (identifier)
    (newExpr
      (declaredType
        (qualifiedIdentifier
          (identifier)))
      (objectBody)))
  (classProperty
    (identifier)
    (unqualifiedAccessExpr
      (identifier)
      (argumentList
        (intLiteralExpr)
        (intLiteralExpr)
        (intLiteralExpr))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier)))
          (multiplicativeExpr
            (unqualifiedAccessExpr
              (identifier))
            (unqualifiedAccessExpr
              (identifier)))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier))))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier)))
          (multiplicativeExpr
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier))
            (unqualifiedAccessExpr
              (identifier)))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier)))
          (qualifiedAccessExpr
            (unqualifiedAccessExpr
              (identifier))
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier))))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier)))
          (qualifiedAccessExpr
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier))
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier))
              (intLiteralExpr)))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (intLiteralExpr)
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier))
            (typedIdentifier
              (identifier)))
          (additiveExpr
            (additiveExpr
              (unqualifiedAccessExpr
                (identifier))
              (unqualifiedAccessExpr
                (identifier)))
            (unqualifiedAccessExpr
              (identifier)))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (intLiteralExpr)
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier))
            (typedIdentifier
              (identifier)))
          (additiveExpr
            (unqualifiedAccessExpr
              (identifier)
              (argumentList
                (unqualifiedAccessExpr
                  (identifier))))
            (unqualifiedAccessExpr
              (identifier)))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (intLiteralExpr)
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier))
            (typedIdentifier
              (identifier)))
          (additiveExpr
            (multiplicativeExpr
              (qualifiedAccessExpr
                (unqualifiedAccessExpr
                  (identifier))
                (identifier))
              (unqualifiedAccessExpr
                (identifier)))
            (unqualifiedAccessExpr
              (identifier)))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (intLiteralExpr)
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier))
            (typedIdentifier
              (identifier)))
          (additiveExpr
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier)
              (argumentList
                (unqualifiedAccessExpr
                  (identifier))))
            (unqualifiedAccessExpr
              (identifier)))))))
  (classProperty
    (identifier)
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList
        (intLiteralExpr)
        (functionLiteralExpr
          (parameterList
            (typedIdentifier
              (identifier))
            (typedIdentifier
              (identifier)))
          (qualifiedAccessExpr
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier))
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier))
              (unqualifiedAccessExpr
                (identifier))))))))
  (classMethod
    (methodHeader
      (identifier)
      (parameterList
        (typedIdentifier
          (identifier))))
    (qualifiedAccessExpr
      (unqualifiedAccessExpr
        (identifier))
      (identifier)
      (argumentList)))
  (classProperty
    (identifier)
    (unqualifiedAccessExpr
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList)
          (unqualifiedAccessExpr
            (identifier))))))
  (classProperty
    (identifier)
    (unqualifiedAccessExpr
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList)
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr)))))))
  (classProperty
    (identifier)
    (unqualifiedAccessExpr
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList)
          (qualifiedAccessExpr
            (unqualifiedAccessExpr
              (identifier))
            (identifier))))))
  (classProperty
    (identifier)
    (unqualifiedAccessExpr
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList)
          (qualifiedAccessExpr
            (unqualifiedAccessExpr
              (identifier))
            (identifier)
            (argumentList
              (intLiteralExpr)))))))
  (classProperty
    (identifier)
    (unqualifiedAccessExpr
      (identifier)
      (argumentList
        (functionLiteralExpr
          (parameterList)
          (qualifiedAccessExpr
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier))
            (identifier)
            (argumentList
              (intLiteralExpr)
              (intLiteralExpr))))))))