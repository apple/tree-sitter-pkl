===
mappings2/mapping1.pkl
===

class Person {
  name: String
  age: Int
}

function id(x) = x

res1 = new Mapping {}

res2 = new Mapping {
  when (false) { [0] = 0 }
  [null] = null
  [true] = true
  [42] = 42
  [1.23] = 1.23
  ["foo"] = "foo"
  [Regex("bar")] = Regex("bar")
  [5.gb] = 5.gb
  [3.min] = 3.min
  [Pair(1, 2)] = Pair(1, 2)
  [List(1, 2, 3)] = List(1, 2, 3)
  [Set(1, 2, 3)] = Set(1, 2, 3)
  [Map("one", 1, "two", 2)] = Map("one", 1, "two", 2)
  [new Dynamic { name = "Pigeon"; age = 42 }] = new Dynamic { name = "Pigeon"; age = 42 }
  [new Person { name = "Pigeon"; age = 42 }] = new Person { name = "Pigeon"; age = 42 }
  [new Listing { 1; 2; 3 }] = new Listing { 1; 2; 3 }
  [new Mapping { ["one"] = 1; ["two"] = 2 }] = new Mapping { ["one"] = 1; ["two"] = 2 }
}

res3 = new Mapping {
  when (false) { [0] = 0 }
  [id(null)] = id(null)
  [id(true)] = id(true)
  [id(42)] = id(42)
  [id(1.23)] = id(1.23)
  [id("foo")] = id("foo")
  [id(Regex("bar"))] = id(Regex("bar"))
  [id(5.gb)] = id(5.gb)
  [id(3.min)] = id(3.min)
  [id(Pair(1, 2))] = id(Pair(1, 2))
  [id(List(1, 2, 3))] = id(List(1, 2, 3))
  [id(Set(1, 2, 3))] = id(Set(1, 2, 3))
  [id(Map("one", 1, "two", 2))] = id(Map("one", 1, "two", 2))
  [id(new Dynamic { name = "Pigeon"; age = 42 })] = id(new Dynamic { name = "Pigeon"; age = 42 })
  [id(new Person { name = "Pigeon"; age = 42 })] = id(new Person { name = "Pigeon"; age = 42 })
  [id(new Listing { 1; 2; 3 })] = id(new Listing { 1; 2; 3 })
  [id(new Mapping { ["one"] = 1; ["two"] = 2 })] = id(new Mapping { ["one"] = 1; ["two"] = 2 })
}

---

(module
  (clazz
    (identifier)
    (classBody
      (classProperty
        (identifier)
        (typeAnnotation
          (declaredType
            (qualifiedIdentifier
              (identifier)))))
      (classProperty
        (identifier)
        (typeAnnotation
          (declaredType
            (qualifiedIdentifier
              (identifier)))))))
  (classMethod
    (methodHeader
      (identifier)
      (parameterList
        (typedIdentifier
          (identifier))))
    (unqualifiedAccessExpr
      (identifier)))
  (classProperty
    (identifier)
    (newExpr
      (declaredType
        (qualifiedIdentifier
          (identifier)))
      (objectBody)))
  (classProperty
    (identifier)
    (newExpr
      (declaredType
        (qualifiedIdentifier
          (identifier)))
      (objectBody
        (whenGenerator
          (falseLiteralExpr)
          (objectBody
            (objectEntry
              (intLiteralExpr)
              (intLiteralExpr))))
        (objectEntry
          (nullLiteralExpr)
          (nullLiteralExpr))
        (objectEntry
          (trueLiteralExpr)
          (trueLiteralExpr))
        (objectEntry
          (intLiteralExpr)
          (intLiteralExpr))
        (objectEntry
          (floatLiteralExpr)
          (floatLiteralExpr))
        (objectEntry
          (slStringLiteralExpr
            (slStringLiteralPart))
          (slStringLiteralExpr
            (slStringLiteralPart)))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (slStringLiteralExpr
                (slStringLiteralPart))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (slStringLiteralExpr
                (slStringLiteralPart)))))
        (objectEntry
          (qualifiedAccessExpr
            (intLiteralExpr)
            (identifier))
          (qualifiedAccessExpr
            (intLiteralExpr)
            (identifier)))
        (objectEntry
          (qualifiedAccessExpr
            (intLiteralExpr)
            (identifier))
          (qualifiedAccessExpr
            (intLiteralExpr)
            (identifier)))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr)
              (intLiteralExpr)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr)
              (intLiteralExpr))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr)
              (intLiteralExpr)
              (intLiteralExpr)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr)
              (intLiteralExpr)
              (intLiteralExpr))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr)
              (intLiteralExpr)
              (intLiteralExpr)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr)
              (intLiteralExpr)
              (intLiteralExpr))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (slStringLiteralExpr
                (slStringLiteralPart))
              (intLiteralExpr)
              (slStringLiteralExpr
                (slStringLiteralPart))
              (intLiteralExpr)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (slStringLiteralExpr
                (slStringLiteralPart))
              (intLiteralExpr)
              (slStringLiteralExpr
                (slStringLiteralPart))
              (intLiteralExpr))))
        (objectEntry
          (newExpr
            (declaredType
              (qualifiedIdentifier
                (identifier)))
            (objectBody
              (objectProperty
                (identifier)
                (slStringLiteralExpr
                  (slStringLiteralPart)))
              (objectProperty
                (identifier)
                (intLiteralExpr))))
          (newExpr
            (declaredType
              (qualifiedIdentifier
                (identifier)))
            (objectBody
              (objectProperty
                (identifier)
                (slStringLiteralExpr
                  (slStringLiteralPart)))
              (objectProperty
                (identifier)
                (intLiteralExpr)))))
        (objectEntry
          (newExpr
            (declaredType
              (qualifiedIdentifier
                (identifier)))
            (objectBody
              (objectProperty
                (identifier)
                (slStringLiteralExpr
                  (slStringLiteralPart)))
              (objectProperty
                (identifier)
                (intLiteralExpr))))
          (newExpr
            (declaredType
              (qualifiedIdentifier
                (identifier)))
            (objectBody
              (objectProperty
                (identifier)
                (slStringLiteralExpr
                  (slStringLiteralPart)))
              (objectProperty
                (identifier)
                (intLiteralExpr)))))
        (objectEntry
          (newExpr
            (declaredType
              (qualifiedIdentifier
                (identifier)))
            (objectBody
              (objectElement
                (intLiteralExpr))
              (objectElement
                (intLiteralExpr))
              (objectElement
                (intLiteralExpr))))
          (newExpr
            (declaredType
              (qualifiedIdentifier
                (identifier)))
            (objectBody
              (objectElement
                (intLiteralExpr))
              (objectElement
                (intLiteralExpr))
              (objectElement
                (intLiteralExpr)))))
        (objectEntry
          (newExpr
            (declaredType
              (qualifiedIdentifier
                (identifier)))
            (objectBody
              (objectEntry
                (slStringLiteralExpr
                  (slStringLiteralPart))
                (intLiteralExpr))
              (objectEntry
                (slStringLiteralExpr
                  (slStringLiteralPart))
                (intLiteralExpr))))
          (newExpr
            (declaredType
              (qualifiedIdentifier
                (identifier)))
            (objectBody
              (objectEntry
                (slStringLiteralExpr
                  (slStringLiteralPart))
                (intLiteralExpr))
              (objectEntry
                (slStringLiteralExpr
                  (slStringLiteralPart))
                (intLiteralExpr))))))))
  (classProperty
    (identifier)
    (newExpr
      (declaredType
        (qualifiedIdentifier
          (identifier)))
      (objectBody
        (whenGenerator
          (falseLiteralExpr)
          (objectBody
            (objectEntry
              (intLiteralExpr)
              (intLiteralExpr))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (nullLiteralExpr)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (nullLiteralExpr))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (trueLiteralExpr)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (trueLiteralExpr))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (intLiteralExpr))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (floatLiteralExpr)))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (floatLiteralExpr))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (slStringLiteralExpr
                (slStringLiteralPart))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (slStringLiteralExpr
                (slStringLiteralPart)))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart)))))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier)))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier)))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (intLiteralExpr)
                  (intLiteralExpr)))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (intLiteralExpr)
                  (intLiteralExpr))))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (intLiteralExpr)
                  (intLiteralExpr)
                  (intLiteralExpr)))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (intLiteralExpr)
                  (intLiteralExpr)
                  (intLiteralExpr))))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (intLiteralExpr)
                  (intLiteralExpr)
                  (intLiteralExpr)))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (intLiteralExpr)
                  (intLiteralExpr)
                  (intLiteralExpr))))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))
                  (intLiteralExpr)
                  (slStringLiteralExpr
                    (slStringLiteralPart))
                  (intLiteralExpr)))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))
                  (intLiteralExpr)
                  (slStringLiteralExpr
                    (slStringLiteralPart))
                  (intLiteralExpr))))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (newExpr
                (declaredType
                  (qualifiedIdentifier
                    (identifier)))
                (objectBody
                  (objectProperty
                    (identifier)
                    (slStringLiteralExpr
                      (slStringLiteralPart)))
                  (objectProperty
                    (identifier)
                    (intLiteralExpr))))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (newExpr
                (declaredType
                  (qualifiedIdentifier
                    (identifier)))
                (objectBody
                  (objectProperty
                    (identifier)
                    (slStringLiteralExpr
                      (slStringLiteralPart)))
                  (objectProperty
                    (identifier)
                    (intLiteralExpr)))))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (newExpr
                (declaredType
                  (qualifiedIdentifier
                    (identifier)))
                (objectBody
                  (objectProperty
                    (identifier)
                    (slStringLiteralExpr
                      (slStringLiteralPart)))
                  (objectProperty
                    (identifier)
                    (intLiteralExpr))))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (newExpr
                (declaredType
                  (qualifiedIdentifier
                    (identifier)))
                (objectBody
                  (objectProperty
                    (identifier)
                    (slStringLiteralExpr
                      (slStringLiteralPart)))
                  (objectProperty
                    (identifier)
                    (intLiteralExpr)))))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (newExpr
                (declaredType
                  (qualifiedIdentifier
                    (identifier)))
                (objectBody
                  (objectElement
                    (intLiteralExpr))
                  (objectElement
                    (intLiteralExpr))
                  (objectElement
                    (intLiteralExpr))))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (newExpr
                (declaredType
                  (qualifiedIdentifier
                    (identifier)))
                (objectBody
                  (objectElement
                    (intLiteralExpr))
                  (objectElement
                    (intLiteralExpr))
                  (objectElement
                    (intLiteralExpr)))))))
        (objectEntry
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (newExpr
                (declaredType
                  (qualifiedIdentifier
                    (identifier)))
                (objectBody
                  (objectEntry
                    (slStringLiteralExpr
                      (slStringLiteralPart))
                    (intLiteralExpr))
                  (objectEntry
                    (slStringLiteralExpr
                      (slStringLiteralPart))
                    (intLiteralExpr))))))
          (unqualifiedAccessExpr
            (identifier)
            (argumentList
              (newExpr
                (declaredType
                  (qualifiedIdentifier
                    (identifier)))
                (objectBody
                  (objectEntry
                    (slStringLiteralExpr
                      (slStringLiteralPart))
                    (intLiteralExpr))
                  (objectEntry
                    (slStringLiteralExpr
                      (slStringLiteralPart))
                    (intLiteralExpr)))))))))))