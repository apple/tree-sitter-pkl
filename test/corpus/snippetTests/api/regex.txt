===
api/regex.pkl
===

amends "../snippetTest.pkl"

examples {
  ["construction"] {
    Regex("abc")
    Regex("abc") is Regex
  }

  ["pattern"] {
    Regex("").pattern
    Regex(#"(?i)abc"#).pattern
    Regex(#"a(\s*)b(\s*)c"#).pattern
    Regex(#"a(?:\s*)b\(c\)"#).pattern
  }

  ["groupCount"] {
    Regex("").groupCount
    Regex(#"(?i)abc"#).groupCount
    Regex(#"a(\s*)b(\s*)c"#).groupCount
    Regex(#"a(?:\s*)b\(c\)"#).groupCount
  }

  ["findMatchesIn()"] {
    Regex(#"\]\*\["#).findMatchesIn("[*] ... [*]")
    Regex(#"\[\*\]"#).findMatchesIn("[*] ... [*]")
    Regex(#""#).findMatchesIn("[*] ... [*]")
    Regex(#".*"#).findMatchesIn("[*] ... [*]")
    module.catch(() -> Regex(#"*"#).findMatchesIn("[*] ... [*]"))

    Regex(#"foo(\w*)bar(\w*)"#).findMatchesIn("fooPigeonbarBarnOwl")
    Regex(#"foo(\w*)bar(\w*)"#).findMatchesIn("other fooPigeonbarBarnOwl other fooParrotbarElfOwl")
    Regex(#"(abc)|(def)"#).findMatchesIn("xxxabcxxxdefxxxabc")

    Regex(#"\w+"#).findMatchesIn("!!!abc!!!def!!!").map((it) -> it.toString())
    Regex(#"(\w)(\w\w)"#).findMatchesIn("abc").single.groups.map((it) -> it.toString())
  }

  ["matchEntire()"] {
    Regex(#"(\d+)\w+"#).matchEntire("123abc")
    Regex(#"(\d+)\w+"#).matchEntire("123abc!!!")
  }
}

---

(module
  (moduleHeader
      (extendsOrAmendsClause
      (stringConstant
        (slStringLiteralPart))))
  (classProperty
    (identifier)
    (objectBody
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (objectElement
            (unqualifiedAccessExpr
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (typeTestExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (declaredType
                (qualifiedIdentifier
                  (identifier)))))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr)))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr)))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr)))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (moduleExpr)
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList)
                  (qualifiedAccessExpr
                    (unqualifiedAccessExpr
                      (identifier)
                      (argumentList
                        (slStringLiteralExpr
                          (slStringLiteralPart))))
                    (identifier)
                    (argumentList
                      (slStringLiteralExpr
                        (slStringLiteralPart))))))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (unqualifiedAccessExpr
                  (identifier)
                  (argumentList
                    (slStringLiteralExpr
                      (slStringLiteralPart))))
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList
                    (typedIdentifier
                      (identifier)))
                  (qualifiedAccessExpr
                    (unqualifiedAccessExpr
                      (identifier))
                    (identifier)
                    (argumentList))))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (qualifiedAccessExpr
                  (qualifiedAccessExpr
                    (unqualifiedAccessExpr
                      (identifier)
                      (argumentList
                        (slStringLiteralExpr
                          (slStringLiteralPart))))
                    (identifier)
                    (argumentList
                      (slStringLiteralExpr
                        (slStringLiteralPart))))
                  (identifier))
                (identifier))
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList
                    (typedIdentifier
                      (identifier)))
                  (qualifiedAccessExpr
                    (unqualifiedAccessExpr
                      (identifier))
                    (identifier)
                    (argumentList))))))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (slStringLiteralExpr
                    (slStringLiteralPart))))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart))))))))))