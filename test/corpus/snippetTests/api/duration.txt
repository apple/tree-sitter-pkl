===
api/duration.pkl
===

amends "../snippetTest.pkl"

import "pkl:math"

facts {
  ["isPositive"] {
    0.min.isPositive
    0.0.min.isPositive
    1.min.isPositive
    0.1.min.isPositive

    (-0).min.isPositive
    (-0.0).min.isPositive
    !(-1).min.isPositive
    !(-0.1).min.isPositive
  }

  ["isBetween"] {
    3.min.isBetween(2.min, 4.min)
    3.min.isBetween(3.min, 4.min)
    3.min.isBetween(2.min, 3.min)
    3.min.isBetween(3.min, 3.min)
    3.min.isBetween(120.s, 180.s)
    !3.min.isBetween(1.min, 2.min)
    !3.min.isBetween(4.min, 2.min)

    3.3.min.isBetween(2.2.min, 4.4.min)
    3.3.min.isBetween(3.3.min, 4.4.min)
    3.3.min.isBetween(2.2.min, 3.3.min)
    3.3.min.isBetween(3.3.min, 3.3.min)
    3.3.min.isBetween(120.s, 210.s)
    !3.3.min.isBetween(1.1.min, 2.2.min)
    !3.3.min.isBetween(4.4.min, 2.2.min)
  }
}

examples {
  local cases = new Listing {
    1.ns
    2.2.us
    3.ms
    4.4.s
    5.min
    6.6.h
    7.d
  }
  ["value"] {
    for (c in cases) {
      c.value
    }
    List(1, 2.2, 3).map((d) -> d.mb.value)
  }

  ["unit"] {
    for (c in cases) {
      c.unit
    }
  }
  
  ["isoString"] {
    for (c in cases) {
      c.isoString
    }
    2000.5.ms.isoString
    0.h.isoString
    0.0.h.isoString
    (-0.0).h.isoString
    0.s.isoString
    0.0.s.isoString
    (-0.0).s.isoString
    0.ms.isoString
    0.0.ms.isoString
    (-0.0).ms.isoString
    100.d.isoString
    (-10.001).s.isoString
    (-3.1.h).isoString
    math.maxFiniteFloat.s.isoString
    module.catch(() -> (0/0).s.isoString)
    module.catch(() -> (1/0).s.isoString)
    module.catch(() -> (-1/0).s.isoString)
    module.catch(() -> (math.maxFiniteFloat * 1.00000000001).s.isoString)
  }

  ["toUnit()"] {
    1.d.toUnit("d")
    1.d.toUnit("h")
    1.d.toUnit("min")
    1.d.toUnit("s")
    1.d.toUnit("ms")
    1.d.toUnit("us")
    1.d.toUnit("ns")

    local ns = 1.d.toUnit("ns")
    ns.toUnit("d")
    ns.toUnit("h")
    ns.toUnit("min")
    ns.toUnit("s")
    ns.toUnit("us")
    ns.toUnit("ns")

    0.5.h.toUnit("s")
    1800.s.toUnit("h")

    module.catch(() -> 1.d.toUnit("foo"))
  }
}

---

(module
  (moduleHeader
      (extendsOrAmendsClause
      (stringConstant
        (slStringLiteralPart))))
  (importClause
    (stringConstant
      (slStringLiteralPart)))
  (classProperty
    (identifier)
    (objectBody
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (parenthesizedExpr
                  (unaryMinusExpr
                    (intLiteralExpr)))
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (parenthesizedExpr
                  (unaryMinusExpr
                    (floatLiteralExpr)))
                (identifier))
              (identifier)))
          (objectElement
            (logicalNotExpr
              (qualifiedAccessExpr
                (qualifiedAccessExpr
                  (parenthesizedExpr
                    (unaryMinusExpr
                      (intLiteralExpr)))
                  (identifier))
                (identifier))))
          (objectElement
            (logicalNotExpr
              (qualifiedAccessExpr
                (qualifiedAccessExpr
                  (parenthesizedExpr
                    (unaryMinusExpr
                      (floatLiteralExpr)))
                  (identifier))
                (identifier))))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier)))))
          (objectElement
            (logicalNotExpr
              (qualifiedAccessExpr
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier))
                (identifier)
                (argumentList
                  (qualifiedAccessExpr
                    (intLiteralExpr)
                    (identifier))
                  (qualifiedAccessExpr
                    (intLiteralExpr)
                    (identifier))))))
          (objectElement
            (logicalNotExpr
              (qualifiedAccessExpr
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier))
                (identifier)
                (argumentList
                  (qualifiedAccessExpr
                    (intLiteralExpr)
                    (identifier))
                  (qualifiedAccessExpr
                    (intLiteralExpr)
                    (identifier))))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier))
                (qualifiedAccessExpr
                  (intLiteralExpr)
                  (identifier)))))
          (objectElement
            (logicalNotExpr
              (qualifiedAccessExpr
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier))
                (identifier)
                (argumentList
                  (qualifiedAccessExpr
                    (floatLiteralExpr)
                    (identifier))
                  (qualifiedAccessExpr
                    (floatLiteralExpr)
                    (identifier))))))
          (objectElement
            (logicalNotExpr
              (qualifiedAccessExpr
                (qualifiedAccessExpr
                  (floatLiteralExpr)
                  (identifier))
                (identifier)
                (argumentList
                  (qualifiedAccessExpr
                    (floatLiteralExpr)
                    (identifier))
                  (qualifiedAccessExpr
                    (floatLiteralExpr)
                    (identifier))))))))))
  (classProperty
    (identifier)
    (objectBody
      (objectProperty
        (modifier)
        (identifier)
        (newExpr
          (declaredType
            (qualifiedIdentifier
              (identifier)))
          (objectBody
            (objectElement
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier)))
            (objectElement
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier)))
            (objectElement
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier)))
            (objectElement
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier)))
            (objectElement
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier)))
            (objectElement
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier)))
            (objectElement
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (forGenerator
            (typedIdentifier
              (identifier))
            (unqualifiedAccessExpr
              (identifier))
            (objectBody
              (objectElement
                (qualifiedAccessExpr
                  (unqualifiedAccessExpr
                    (identifier))
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier)
                (argumentList
                  (intLiteralExpr)
                  (floatLiteralExpr)
                  (intLiteralExpr)))
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList
                    (typedIdentifier
                      (identifier)))
                  (qualifiedAccessExpr
                    (qualifiedAccessExpr
                      (unqualifiedAccessExpr
                        (identifier))
                      (identifier))
                    (identifier))))))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (forGenerator
            (typedIdentifier
              (identifier))
            (unqualifiedAccessExpr
              (identifier))
            (objectBody
              (objectElement
                (qualifiedAccessExpr
                  (unqualifiedAccessExpr
                    (identifier))
                  (identifier)))))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (forGenerator
            (typedIdentifier
              (identifier))
            (unqualifiedAccessExpr
              (identifier))
            (objectBody
              (objectElement
                (qualifiedAccessExpr
                  (unqualifiedAccessExpr
                    (identifier))
                  (identifier)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (parenthesizedExpr
                  (unaryMinusExpr
                    (floatLiteralExpr)))
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (parenthesizedExpr
                  (unaryMinusExpr
                    (floatLiteralExpr)))
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (parenthesizedExpr
                  (unaryMinusExpr
                    (floatLiteralExpr)))
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (parenthesizedExpr
                  (unaryMinusExpr
                    (floatLiteralExpr)))
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (parenthesizedExpr
                (unaryMinusExpr
                  (qualifiedAccessExpr
                    (floatLiteralExpr)
                    (identifier))))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (qualifiedAccessExpr
                  (unqualifiedAccessExpr
                    (identifier))
                  (identifier))
                (identifier))
              (identifier)))
          (objectElement
            (qualifiedAccessExpr
              (moduleExpr)
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList)
                  (qualifiedAccessExpr
                    (qualifiedAccessExpr
                      (parenthesizedExpr
                        (multiplicativeExpr
                          (intLiteralExpr)
                          (intLiteralExpr)))
                      (identifier))
                    (identifier))))))
          (objectElement
            (qualifiedAccessExpr
              (moduleExpr)
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList)
                  (qualifiedAccessExpr
                    (qualifiedAccessExpr
                      (parenthesizedExpr
                        (multiplicativeExpr
                          (intLiteralExpr)
                          (intLiteralExpr)))
                      (identifier))
                    (identifier))))))
          (objectElement
            (qualifiedAccessExpr
              (moduleExpr)
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList)
                  (qualifiedAccessExpr
                    (qualifiedAccessExpr
                      (parenthesizedExpr
                        (multiplicativeExpr
                          (unaryMinusExpr
                            (intLiteralExpr))
                          (intLiteralExpr)))
                      (identifier))
                    (identifier))))))
          (objectElement
            (qualifiedAccessExpr
              (moduleExpr)
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList)
                  (qualifiedAccessExpr
                    (qualifiedAccessExpr
                      (parenthesizedExpr
                        (multiplicativeExpr
                          (qualifiedAccessExpr
                            (unqualifiedAccessExpr
                              (identifier))
                            (identifier))
                          (floatLiteralExpr)))
                      (identifier))
                    (identifier))))))))
      (objectEntry
        (slStringLiteralExpr
          (slStringLiteralPart))
        (objectBody
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectProperty
            (modifier)
            (identifier)
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (unqualifiedAccessExpr
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (floatLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (qualifiedAccessExpr
                (intLiteralExpr)
                (identifier))
              (identifier)
              (argumentList
                (slStringLiteralExpr
                  (slStringLiteralPart)))))
          (objectElement
            (qualifiedAccessExpr
              (moduleExpr)
              (identifier)
              (argumentList
                (functionLiteralExpr
                  (parameterList)
                  (qualifiedAccessExpr
                    (qualifiedAccessExpr
                      (intLiteralExpr)
                      (identifier))
                    (identifier)
                    (argumentList
                      (slStringLiteralExpr
                        (slStringLiteralPart)))))))))))))